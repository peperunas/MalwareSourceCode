import os

LINUX_DIR = "."

statistics = {}

grand_total = 0
grand_compiled = 0
for x in os.listdir(LINUX_DIR):
    family_dir = os.path.join(LINUX_DIR, x)
    if os.path.isdir(family_dir):
        n_compiled = 0
        n_total = 0
        for s in os.listdir(family_dir):
            s = s.lower()
            if s.endswith(".rar") or s.endswith(".7z") or s.endswith(".zip"):
                n_total += 1
    
        for root, dirs, files in os.walk(family_dir):
            for file in files:
                if file == "compile.sh":
                    n_compiled += 1


        p_compiled = float(n_compiled)/float(n_total)
        print(f"Counting {x}: {n_total} {n_compiled} {p_compiled}")

        grand_total += n_total
        grand_compiled += n_compiled


print("-" * 30)
grand_p_compiled = grand_compiled/grand_total
print(f"Grand total: {grand_total} {grand_compiled} {grand_p_compiled}")

'''
Infectors 15
Botnets 2
Rootkits 10
Mirai-Family 48
Backdoors 19
Tools 11
Trojans 4
'''
